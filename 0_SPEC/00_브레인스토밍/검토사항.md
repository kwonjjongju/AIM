### 검토사항 (리뷰 결과 정리)

**프로젝트**: 업무 개선 보드 (Fix-it Board)  
**작성일**: 2026-01-19  
**목적**: 현 문서 세트(REQ/DSN/GUARD/MVP/TASK/VERIFICATION) 간 **불일치/리스크/보완 포인트**를 정리하여 개발 착수 전 정합성 확보

---

## ✅ 검토 완료 현황 (2026-01-19)

| 항목 | 상태 | 반영 문서 | 완료일 |
|------|------|-----------|--------|
| P0-1 | ✅ 완료 | api-design.md | 2026-01-19 |
| P0-2 | ✅ 완료 | api-design.md | 2026-01-19 |
| P0-3 | ✅ 완료 | traceability.md | 2026-01-19 |
| P1-1 | ✅ 완료 | api-design.md | 2026-01-19 |
| P1-2 | ✅ 완료 | api-design.md | 2026-01-19 |
| P2-1 | ✅ 완료 | data-model.md | 2026-01-19 |
| P2-2 | ✅ 완료 | security-design.md | 2026-01-19 |
| P2-3 | ✅ 완료 | security-design.md | 2026-01-19 |

---

### 전반 총평
- **문서 체계와 방향성은 탄탄**하며, 특히 “성과관리가 아닌 리스트 관리” 원칙이 요구사항 → 가드레일(불변/금지) → 성공지표까지 일관됨.
- 개발 착수 전, 구현 단계에서 반드시 부딪히는 **인증/토큰·에러 규격·추적성 집계·MVP 범위 표기**의 불일치를 정리하면 재작업을 크게 줄일 수 있음.

---

### 잘 된 점(강점)
- **핵심 철학의 일관성**
  - `srs.md` Anti-Requirements ↔ `invariants.md`/`forbidden.md`/`success-metrics.md`로 자연스럽게 연결됨.
- **요구→설계→작업→검증의 골격**
  - `sds.md` 매핑, `task-breakdown.md` Phase 분해, `verification`의 테스트 피라미드/도구 선정이 현실적.
- **데이터 모델의 구현 친화성**
  - `data-model.md`에 ERD/인덱스/Prisma schema까지 포함되어 바로 구현 가능 수준.

---

### 핵심 불일치/리스크 (P0: 즉시 정리 권장)

#### P0-1. 토큰/세션 설계 문서 간 충돌 ✅ 완료
- **증상**
  - `security-design.md`: Refresh Token 저장 위치를 **HttpOnly Cookie**로 정의
  - `api-design.md`: 로그인 응답에 **refreshToken을 JSON으로 반환**하는 예시, `/auth/refresh`도 **body로 refreshToken** 입력 예시
  - `architecture.md`/`security-design.md`: "JWT 무상태" 서술과 동시에 `security-design.md`는 **Redis 블랙리스트로 무효화**(서버 상태) 정책 포함
- **리스크**
  - FE/BE 구현 방향(쿠키 기반 vs 바디 전달) 및 CORS/CSRF 정책이 달라져 재작업 가능
  - 로그아웃/세션 무효화 정책(블랙리스트 vs allowlist vs 세션 테이블)이 모호
- **결정/정리 제안(택1 후 문서 전반 통일)**
  - **권장**: Access Token은 메모리(헤더), Refresh Token은 HttpOnly Cookie(서버가 읽음)로 고정  
  - 로그아웃/무효화는 "Redis 블랙리스트"를 계속 쓸지, 또는 "Refresh 세션 저장(allowlist)"로 갈지 1줄로 확정
- **✅ 반영 내용**: api-design.md에서 refreshToken JSON 응답 삭제, HttpOnly Cookie 방식으로 통일

#### P0-2. 에러 응답 규격이 2가지로 존재 ✅ 완료
- **증상**
  - `api-design.md`: `{ success:false, error:{ code, message } }`
  - `failure-policies.md`: `details[]`까지 포함하는 확장 포맷 + 409/422/429/503 등 상태코드 포함
  - `api-design.md`의 HTTP 상태 코드 표에는 409/422/429/503 등이 누락
- **리스크**
  - FE 에러 처리/표준화(토스트/필드 에러) 구현이 흔들림
  - API 문서와 실제 에러 정책 불일치로 QA 시 혼선
- **정리 제안**
  - "에러 포맷은 `failure-policies.md`를 표준"으로 선언하고 `api-design.md` 표/예시를 그에 맞춰 통일
- **✅ 반영 내용**: api-design.md에 details[] 포함 에러 포맷으로 통일, 409/422/429/503 상태코드 추가

#### P0-3. 추적성(수치)와 실제 요구사항 개수의 정합성 ✅ 완료
- **증상**
  - `traceability.md` 요약 커버리지가 "총 28개/100%"로 표기되어 있으나, `srs.md`에는 하위 요구사항(REQ-FR-001-01 등)과 보안 요구사항 상세가 더 많음
  - `test-matrix.md`의 집계(기능/비기능/보안) 수치도 `srs.md`와 정확히 1:1로 맞지 않음
- **리스크**
  - "100% 커버"의 의미가 모호(상위 REQ 기준인지, 하위까지인지)
  - 테스트/추적성 관리에서 누락/중복 발생
- **정리 제안**
  - **집계 기준을 선언**: "상위 REQ 단위(REQ-FR-001)" 또는 "하위 REQ 단위(REQ-FR-001-01)"  
  - 기준에 맞춰 `traceability.md`/`test-matrix.md`의 요약 수치와 표를 재정렬
- **✅ 반영 내용**: traceability.md에 "상위 REQ 단위" 집계 기준 명시, 수치 재정렬

---

### 범위/표기 이슈 (P1: 짧게 보완 권장)

#### P1-1. MVP 범위 vs API 설계 범위 표기 ✅ 완료
- **증상**
  - `mvp-definition.md`: 파일 첨부/담당자/관련부서 태그는 Phase 2로 제외
  - `api-design.md`: 파일 API 섹션이 포함되어 있어 "MVP에 포함"처럼 보일 수 있음
- **정리 제안**
  - `api-design.md`에 엔드포인트별 **Phase(P1/P2/P3) 라벨** 추가 또는 "Phase 2 예정" 명시
- **✅ 반영 내용**: api-design.md 모든 엔드포인트에 [P1]/[P2] Phase 라벨 추가

#### P1-2. "성과/랭킹"으로 오해될 수 있는 표현 가이드(대시보드) ✅ 완료
- **관찰**
  - `forbidden.md`: "실적 비교 차트 금지", `success-metrics.md`: "부서별 등록 건수 순위 금지"
  - `srs.md`/`feature-cut.md`/`acceptance-criteria.md`: 부서별 바 차트, 오래된 항목 5개 표시 요구
- **정리 제안(표현/UX 가이드)**
  - 차트 정렬을 "랭킹"으로 보이게 하지 않기(조직코드 고정/가나다순 등)
  - "TOP" 같은 경쟁 유발 용어 최소화(예: "오래된 항목 5개")
  - 문구에서 "성과/실적" 어휘 회피("현황/흐름/훑어보기" 유지)
- **✅ 반영 내용**: api-design.md에 "대시보드 표현 가이드" 섹션 추가 (정렬 기준, 금지/권장 표현)

---

### 설계 보완 제안 (P2: 선택/추가 명확화)

#### P2-1. 동시 수정 충돌(Optimistic Lock) 구체화 ✅ 완료
- **현황**
  - `safety-rules.md`에 "Optimistic Lock" 규칙은 있으나, `data-model.md`에 구현 방식(예: `version` 컬럼 또는 `updatedAt` 조건부 업데이트)이 명시되지 않음
- **정리 제안**
  - 구현 방식 택1을 문서에 2~3줄로 고정(특히 Item 수정/상태 변경 API에 영향)
- **✅ 반영 내용**: data-model.md에 updatedAt 기반 Optimistic Lock 구현 방식 및 코드 예시 추가

#### P2-2. 접근/감사 로그의 "저장 위치" 결정 ✅ 완료
- **현황**
  - `srs.md`/`security-design.md`에서 접근 로그/감사 로그 필요성이 있으나 저장 매체(DB 테이블 vs 앱 로그) 결정이 불명확
- **정리 제안**
  - "운영 감사 로그는 (DB 테이블/로그 수집)" 중 하나로 명확히 선언
- **✅ 반영 내용**: security-design.md에 "DB 테이블(audit_logs)" 저장 방식 결정 및 스키마 추가

#### P2-3. 직원의 "전체 조회" 정책 리스크만 표시 ✅ 완료
- **현황**
  - 현재 문서들은 EMPLOYEE도 전체 조회 가능으로 정리(권한 매트릭스/인수 기준)
- **정리 제안**
  - 정책이 맞다면 유지하되, 조직 보안 요구가 있을 경우를 대비해 "향후 옵션(부서 제한/익명화)"을 리스크로만 기록
- **✅ 반영 내용**: security-design.md에 현재 정책 유지 + 향후 옵션(부서 제한/익명화/승인 기반) 리스크 기록

---

### 추천 작업 우선순위(개발 착수 전) - ✅ 모두 완료
- **P0** ✅
  - ~~토큰/refresh 흐름(쿠키 vs body) 및 무효화(블랙리스트/세션) 정책 확정 후 문서 통일~~
  - ~~에러 응답 포맷/상태코드 표를 하나로 통일(`failure-policies.md` 기준 권장)~~
  - ~~추적성/테스트 매트릭스 집계 기준 선언 및 수치 정합성 수정~~
- **P1** ✅
  - ~~`api-design.md`에 엔드포인트별 Phase 라벨 추가~~
  - ~~대시보드 표현 가이드(랭킹으로 보이지 않게) 5줄 정도로 명문화~~
- **P2** ✅
  - ~~Optimistic Lock 구현 방식, 감사로그 저장 위치 등 설계 결정을 짧게 확정~~

---

## 🎉 검토사항 전체 완료 - 2026-01-19

모든 검토사항이 반영되었습니다. 개발 착수 준비 완료.

